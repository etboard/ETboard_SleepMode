# ******************************************************************************************
# FileName     : deepsleep_counter_60s.py
# Description  : Deep Sleep 후 깨어났을 때 LED로 작업 중 표시 (60초 주기)
# Author       : 박은정
# Created Date : 2025.07.16
# Reference    :
# Modified     :
# ******************************************************************************************


#===========================================================================================
# 기본 모듈 사용하기
#===========================================================================================
import machine
import time
from machine import Pin
from ETboard.lib.pin_define import *                     # ETboard 핀 관련 모듈


#===========================================================================================
# 전역 변수 선언
#===========================================================================================
operation_led = Pin(D2)                                  # 작동 LED (빨강)


#===========================================================================================
def indicate_wakeup_activity():                          # 작업 표시
#===========================================================================================
    operation_led.init(Pin.OUT)
    operation_led.value(1)                               # LED 켜기
    time.sleep(2)                                        # 2초간 대기
    operation_led.value(0)                               # LED 끄기


#===========================================================================================
def main():                                              # 메인 함수
#===========================================================================================
    reset_cause = machine.reset_cause()                  # 리셋 원인 확인

    print("-" * 40)
    if reset_cause == machine.DEEPSLEEP_RESET:           # 딥슬립에서 깨어난 경우
        print(f"Deep Sleep에서 깨어남")
    else:                                                # 일반적인 전원 켜짐 또는 리셋
        print("전원 ON 또는 리셋")

    indicate_wakeup_activity()                           # 작업 중 표시용 LED 점등

    print("60초 후 깨어남 예정")
    print("Deep Sleep 진입...")
    print("-" * 40)

    machine.deepsleep(60000)                             # 60초 동안 Deep Sleep 진입


#===========================================================================================
# 시작 지점                     
#===========================================================================================
if __name__ == "__main__":
    main()


# ==========================================================================================
#
#  (주)한국공학기술연구원 http://et.ketri.re.kr
#
# ==========================================================================================
